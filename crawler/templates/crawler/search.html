{% extends "crawler/user_layout.html" %}
{% block content %}
{% load staticfiles %}

{% if user.is_authenticated and user.username %}
<script src="{% static 'crawler/scripts/jquery-1.10.2.js' %}"></script>
<style>
/* drop down menu */

div 
{
    font-family: Arial, Verdana;
    font-size: 14px;
    margin: 0 ;
    padding: 0;
    list-style: none;
    border: 10px;
    border-radius: 10px;
}


div select 
{
    text-decoration: none;
    color: #ffffff;
    padding: 5px 15px 5px 15px;
    background: #2C5463;
    border: 10px;
    border-radius: 10px;
}

div select :hover 
{
    background: #617F8A;
}

select :hover  
{
    background: #617F8A;
}

option:hover 
{
    background: #95A9B1;
}
/* drop down menu */

.navbar{
margin-bottom:0px !important;
/*background-color:#1e88e5;*/
/*background-color:#301d1d;;*/
background-color:#000066;
}
.navside b,.navside span{
color:white;
}
ul strong{
color:white;
font-size:18px;
margin-top:25px;
margin-left:10px;
}
ul li{
margin-bottom:5px;
}
</style>
<div id="ubuntubar" style="overflow:scroll;direction:rtl;float:left;width:100px;background:#000066;box-shadow:0 0 4px rgba(0,0,0,.14), 0 4px 8px rgba(0,0,0,.28);height:100%;position:fixed;">
<ul style="direction:ltr;white-space:pre;list-style-type:none;list-style:none;padding:10px;text-align:center;">
{% for key,value in options.items %}
<li style="display:inline-flex;" class="personalize"><img src='{{value}}' width='70px' height='70px' alt='none' style="border-radius:10px;border:2px white;"><strong style="display:none;">{{key}}</strong></li>
{% endfor %}
</ul>
</div>
<script>
$("#ubuntubar").parent().removeClass('container');
$("#ubuntubar").parent().css("margin-top","0px");
$("#ubuntubar").hover(function(){
$("#ubuntubar").css("width","300px");
$('.scard').css('z-index','-1');
},function(){
$("#ubuntubar").css("width","100px");
$('.scard').css('z-index','0');
});
$("li").hover(function(){
$(this).find("img").css({'margin-left':'5px','border':'2px solid'});
$(this).find('strong').show();
},function(){
$(this).find('img').css({'margin-left':'0px','border':'2px solid white'});
$(this).find('strong').hide();
});
</script>
<div style="margin-left:100px;">
    <div class="container" style="margin-top:20px;">
        <div class="row">
            <div class="col-md-6 col-md-offset-3 container" style="text-align: center">
                <img src='{% static "crawler/media/exaro.png" %}' style="margin-top: 20px; height:auto width=90% max-width=400px"/>
            </div>

            <form class="col-md-6 col-md-offset-3" method=get>
                <div class="input-group">
                    <br/>
			 <input type="text" autocomplete="off" class="form-control" list="suggest" id="searchtext" name="query" value="{{query}}" />

                    <datalist id="suggest">

                    </datalist>

                   





                    <span class="input-group-btn">
                        <br/>
                        <button class="btn btn-default" type="submit">
                            <span class="glyphicon glyphicon-search"></span>
                        </button>
                    </span>

                </div>
                <br/>
		 <script>

                    console.log("Hi");

                    var bar=document.getElementById("searchtext");

                    bar.oninput = function() {myFunction()};



                    function myFunction() {

                        //alert("The value of the input field was changed.");

                        console.log(bar.value);

                        var url = "/get_suggestion?query="+bar.value;



                        var jsonFile = new XMLHttpRequest();

                        jsonFile.open("GET",url,true);

                        jsonFile.send();



                        jsonFile.onreadystatechange = function() {

                            if (jsonFile.readyState== 4 && jsonFile.status == 200) {

                                //console.log(jsonFile.responseText);

                                var resp=JSON.parse(jsonFile.responseText);

                                var options = '';

                                console.log(resp[1]);

                                for(var i = 0; i < resp[1].length; i++)

                                    options += '<option value="'+resp[1][i]+'" />';

                                document.getElementById('suggest').innerHTML = options;

                            }

                         }

                    }

                </script>


                <div class="container " style="text-align:center;">
                    <select name="theme" class="testselect " data-style="btn-info">
                        <option value="all">All Themes</option>
                        <option value="tech">Technology</option>
                        <option value="business">Business</option>
                        <option value="energy">Energy</option>
	        	<option value="agri">Agriculture</option>
			<option value="water">Water</option>
			<option value="people">People</option>
        	   	<option value="ent">Entertainment</option>
	
 		</select>
                     
                </div>

            </form>
        </div>
	  <div align="center" id="google_translate_element"></div>



            <script type="text/javascript">

            function googleTranslateElementInit() {

              new google.translate.TranslateElement({pageLanguage: 'en'}, 'google_translate_element');

            }

            </script>

            <script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit">

            </script>

          

<div class="col-sm-4 col-xs-12 pull-right">
           <ul>
           {% for row in summary %}
            <div class="rowarticle" onclick="window.location.href={{row.url}};">
                  <div class="card auto" >
                    <div class="card-image">
                      <img src={{row.img}}>
                    </div>
                    <div class="card-content">
                      <p >{{row.text}}</p>
                    </div>
                    
                  </div>
             </div>
        <br/> 
             {% endfor %}
        </ul>
    </div>

	<div class="col-sm-8 scard">     
        <table class="table-hover" style="margin-top: 30px">
            {% for row in results %}
            <tr >
                <td>
                    </br>
                    <a href="{{row.link}}"><b style="color:darkgreen; font-family: Verdana,sans-serif">{{row.header}}</b></a><br/>
                    <l style="color:darkblue; font-family: sans-serif">{{row.link}}</l>

                    <p style="font-family: sans-serif">{{row.data}}</p>
<div>
                    <l  type="button" style=  "padding: 3px 7px !important;font-size: 13px !important;
                        background-color: #402E20;font-weight: bold;text-shadow: 1px 1px black;color: #ffffff;border-radius: 5px;-moz-border-radius: 5px;-webkit-border-radius: 5px;border: 1px solid black;cursor: pointer;
                        box-shadow: 0 1px 0 rgba(255, 255, 255, 0.5) inset;-moz-box-shadow: 0 1px 0 rgba(255, 255, 255, 0.5) inset;
                        -webkit-box-shadow: 0 1px 0 rgba(255, 255, 255, 0.5) inset;">{{row.theme}}</l>

                     {% for val in row.entity%}
                         <l type="button" style=" margin-left: 5px; padding: 3px 7px !important;font-size: 13px !important;
                        background-color: #E1E1E1;text-shadow: 1px 1px #57D6C7;color: black;border-radius: 5px;-moz-border-radius: 5px;-webkit-border-radius: 5px;border: 1px solid #57D6C7;cursor: pointer;
                        box-shadow: 0 1px 0 rgba(255, 255, 255, 0.5) inset;-moz-box-shadow: 0 1px 0 rgba(255, 255, 255, 0.5) inset;
                        -webkit-box-shadow: 0 1px 0 rgba(255, 255, 255, 0.5) inset;">{{val}}</l>
                    {% endfor %}
                    </div>                    
                </td>
                    
            </tr>
            {% endfor %}

        </table>
    </div>
</div>
</div>

    
{% else %}
    <p>Welcome anonymous user!
        You need to <a href="/login/">login</a></p>
{% endif %}


{% endblock %}

